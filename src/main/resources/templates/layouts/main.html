<!DOCTYPE html>
<html lang="en"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title th:text="#{label.pages.home.title}">Title</title>
	
	    <link th:href="@{/assets/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/simple-line-icons/simple-line-icons.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/scrolling-nav.css}" rel="stylesheet">
        <link th:href="@{/assets/css/style.css}" rel="stylesheet" type="text/css" />
        
        <link th:href="@{/assets/css/animate.css}" rel="stylesheet" type="text/css" />
        
        <link th:href="@{/assets/css/dropzone.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/profile.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/bootstrap-datetimepicker.min.css}" rel="stylesheet" type="text/css" />

  
        <link th:href="@{/assets/css/bootstrap-switch.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/sticky-footer.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/css/components-md.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/assets/summernote/css/summernote.css}" rel="stylesheet" type="text/css" />
        
		
	<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css' />	
	<link href='https://fonts.googleapis.com/css?family=Exo' rel='stylesheet' type='text/css' />
	
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	<style th:inline="text">
	    .password-verdict{
			color:#000;
		}
	</style>

</head>
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
		
		
		
		<!-- Fixed navbar -->
        <nav id="main_navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header page-scroll">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand page-scroll" th:href="@{/home}">DIA eLearning</a>
                </div>
                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    
                    <ul class="nav navbar-nav">
                        <li class="" th:class="${controllerName == 'Home'} ? 'dropdown active' : 'dropdown'"><a th:href="@{/home}">Home</a></li>
                        
                        <li class="dropdown" th:class="${#httpServletRequest.getAttribute('controllerName') == 'Student'} ? 'dropdown active' : 'dropdown'">
					            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Student<span class="caret"></span></a>
					            <ul class="dropdown-menu">
					                <li><a th:href="@{/student/assignment}">My Assignment</a></li>
					                <!-- <li><a th:href="@{/authorizationDocumentUpload}">Authorization Document Upload</a></li>				                
					                <li><a th:href="@{/answerUpload}">Answer Submission</a></li> -->
					            </ul>
					    </li>
					    
					    
					    <li class="dropdown" th:class="${#httpServletRequest.getAttribute('controllerName') == 'Teacher'} ? 'dropdown active' : 'dropdown'">
					            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Teacher<span class="caret"></span></a>
					            <ul class="dropdown-menu">
					                <li><a th:href="@{/teacher/assignment}"><i class="fa fa-plus-circle"></i>Create Assignment</a></li>
					                <li><a th:href="@{/teacher/assignments}"><i class="fa fa-eye"></i>View Assignments</a></li>
					                <li><a th:href="@{/teacher/group}"><i class="fa fa-envelope" aria-hidden="true"></i>Create Group</a></li>				                
					                <li><a th:href="@{/teacher/groups}"><i class="fa fa-users"></i>Group List</a></li>
					            </ul>
					    </li>
					    
					    
					    <li class="dropdown" th:class="${#httpServletRequest.getAttribute('controllerName') == 'Admin'} ? 'dropdown active' : 'dropdown'">
					            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Admin<span class="caret"></span></a>
					            <ul class="dropdown-menu">
					                <li><a th:href="@{/admin/allUsers}">All Users</a></li>
					               <!--  <li><a th:href="@{/authorizationDocumentUpload}">Authorization Document Upload</a></li>				                
					                <li><a th:href="@{/answerUpload}">Answer Submission</a></li> -->
					            </ul>
					    </li>
					    
					        
                    </ul>
                    				    
				    <!-- BEGIN TOP NAVIGATION MENU -->
                    <div class="top-menu">
					
                        <ul class="nav navbar-nav pull-right">
						
                            <!-- BEGIN USER LOGIN DROPDOWN -->
                            <li class="dropdown dropdown-user dropdown-dark" th:class="${#httpServletRequest.getAttribute('controllerName') == 'User'} ? 'dropdown active' : 'dropdown'">
                                <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                    <!-- <img alt="" class="img-circle" th:src="@{assets/img/avatar9.jpg}" /> -->
                                    <img th:src="@{/user/avatar/image}" class="img-circle" alt="" width="30" height="30"/>
                                    <!-- <img th:attr="src=|/user/avatar/image/${session.user}|" class="img-circle" alt="" width="30" height="30"/> -->
                                    
                                    <span class="username username-hide-mobile" th:text="${#authentication.name}">user</span>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-default">
                                    <li>
                                        	<!-- <a href="#" th:onclick="'javascript:userProfile();'" > -->
                                        	<a th:href="@{/userProfile}">
                                            <i class="icon-user"></i>My Profile</a>
                                    </li>
                                    <!-- <li>
                                        	<a href="#" th:onclick="'javascript:updatePassword();'">
                                        	<a th:href="@{/changePassword}">
                                            <i class="icon-lock"></i>Change Password</a>
                                    </li> -->
                                    <li>
                                        <a th:href="@{/logout}">
                                            <i class="icon-key"></i>Log Out 
                                        </a>
                                        <!-- <a th:href="@{/logout}" th:text="#{label.pages.logout}">
                                         	<i class="icon-key"></i>
                                        </a> -->
                                    </li>
                                </ul>
                            </li>
                            <!-- END USER LOGIN DROPDOWN -->
                            <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                            
                            <!-- END QUICK SIDEBAR TOGGLER -->
                        </ul>
                    </div>
                    <!-- END TOP NAVIGATION MENU -->
                    
				    
                </div><!-- /.nav-collapse -->
            </div><!-- /.container -->
        </nav><!-- /.navbar -->
        
        
        

        <div class="container">

           <!--  <div class="row row-offcanvas row-offcanvas-right">

                <div class="col-xs-12 col-sm-9">
                    <p class="pull-right visible-xs">
                        <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
                    </p>
                    <div class="jumbotron">
                        <h1>Hello, world!</h1>
                        <p>This is an example to show the potential of an offcanvas layout pattern in Bootstrap. Try some responsive-range viewport sizes to see it in action.</p>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-lg-4">
                            <h2>Heading</h2>
                            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                            <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
                        </div>/.col-xs-6.col-lg-4
                        <div class="col-xs-6 col-lg-4">
                            <h2>Heading</h2>
                            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                            <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
                        </div>/.col-xs-6.col-lg-4
                        <div class="col-xs-6 col-lg-4">
                            <h2>Heading</h2>
                            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                            <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
                        </div>/.col-xs-6.col-lg-4
                        <div class="col-xs-6 col-lg-4">
                            <h2>Heading</h2>
                            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                            <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
                        </div>/.col-xs-6.col-lg-4
                        <div class="col-xs-6 col-lg-4">
                            <h2>Heading</h2>
                            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                            <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
                        </div>/.col-xs-6.col-lg-4
                        <div class="col-xs-6 col-lg-4">
                            <h2>Heading</h2>
                            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                            <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
                        </div>/.col-xs-6.col-lg-4
                    </div>/row
                </div>/.col-xs-12.col-sm-9

                <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
                    <div class="list-group">
                        <a href="#" class="list-group-item active">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                        <a href="#" class="list-group-item">Link</a>
                    </div>
                </div>/.sidebar-offcanvas
            </div> --><!--/row-->
			
			<div layout:fragment="content">
			
			</div>
		
            

            <footer class="footer">
                <div class="container"> 
                <span class="text-muted">2016 &copy;
                	<a  href="http://daffodil.ac/" target="_blank">Daffodil International Academy (DIA)</a>
                </span>
            	</div>
            </footer>
            
		     
		


	</div><!--/.container-->

    <script th:src="@{/assets/js/jquery.min.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/bootstrap.min.js}" type="text/javascript"></script>
   <!--  <script th:src="@{/assets/js/moment.min.js}"></script> -->
    <!-- <script th:src="@{/assets/js/navberTransition.js}" type="text/javascript"></script> -->
    <script th:src="@{/assets/js/bootstrap-datetimepicker.js}"></script>
    <script th:src="@{/assets/js/dropzone.js}" type="text/javascript"></script>
	<script th:src="@{/assets/js/pwstrength.js}"></script>
    <script th:src="@{/assets/js/bootstrap-notify.min.js}"></script>
    
    <script th:src="@{/assets/js/bootstrap-hover-dropdown.min.js}"></script>
    <script th:src="@{/assets/js/scrolling-nav.js}"></script>
    <script th:src="@{/assets/summernote/js/summernote.js}"></script>
    
    
    <script th:src="@{/assets/js/multiselect.min.js}"></script>
    
    <!-- Custom Javascript -->
    <script th:src="@{/assets/js/custom_js/dropzoneApp.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/custom_js/userController.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/custom_js/custom_summernote.js}"></script>
     
   
    
   <th:block layout:fragment="script"></th:block>
   
   
<script th:inline="javascript">
/*<![CDATA[*/
         
           
           
$(document).ready(function() {

    $('#search').multiselect({
        search: {
            left: '<input type="text" name="q" class="form-control" placeholder="Search..." />',
            right: '<input type="text" name="q" class="form-control" placeholder="Search..." />',
        },fireSearch: function(value) {
            return value.length > 3;
        }
    });
});


$(function () {
	  $('[data-toggle="tooltip"]').tooltip()
})
	
/* function getValue(){
	var arr = [];
	$("#search_to > option").each(function(){
	   arr.push(this.value);
	});
	
	alert(arr);
} */


function retrieveGroupUsers() {
		 var url = serverContext + 'teacher/groups';
		 if ($('#search').val() != '') {
		    url = url + '/' + $('#search').val();
		 }
		 $("#resultsBlock").load(url);
}


/* function editGroup() {
	
	 var url = serverContext + 'teacher/editGroups';
	    if ($('#search').val() != '') {
	        url = url + '/' + $('#search').val();
	    }else {
	    	
	    	errorMsg("Please select group");
	    	
	    }
} */

function editGroup(){
	
	var url = serverContext + 'teacher/editGroups';
	
	/* alert($('#search').val() ); */
	
	if ($('#search').val() != '') {
        url = url + '/' + $('#search').val();
    }
    
    $.post(url,function(){
    	window.location.href = serverContext + "teacher/group";
    	successMsg( "success" );
    }).fail(function() {
        
    	errorMsg("Please select group");
        
    });
}

/* $('.selectpicker').selectpicker({
	  style: 'btn-info',
	  size: 10,
	  
}); */
	
/* $(function() {

	  $('.selectpicker').on('change', function(){
	    var selected = []; //array to store value
	    $(this).find("option:selected").each(function(key,value){
	        selected.push(value.innerHTML); //push the text to array
	    });
	    
	    console.log(selected);
	    
	  });
	  
}); */
	
/* $('#multiselect1').multiselect({
    selectAllValue: 'multiselect-all',
    enableCaseInsensitiveFiltering: true,
    enableFiltering: true,
    maxHeight: '300',
    buttonWidth: '235',
    onChange: function(element, checked) {
        var brands = $('#multiselect1 option:selected');
        var selected = [];
        $(brands).each(function(index, brand){
            selected.push([$(this).val()]);
        });

        console.log(selected);
    }
});  */

var date = new Date();
date.setDate(date.getDate()-1);

$('.form_date').datetimepicker({
    /* format: "yyyy-mm-dd HH:ii", */
    use24hours: true,
    startDate: date,
    weekStart: 1,
    todayBtn:  1,
	autoclose: 1,
	todayHighlight: 1,
	startView: 2,
	forceParse: 0,
    showMeridian: 1
});

var serverContext = [[@{/}]];

$(document).ready(function () {
    
	$('#passwordChangeForm').submit(function(event) {
    	savePass(event);
    });
    
    $(":password").keyup(function(){
        if($("#password").val() != $("#matchPassword").val()){
            $("#globalError").show().html(/*[[#{PasswordMatches.user}]]*/);
        }else{
            $("#globalError").html("").hide();
        }
    });
    
    options = {
            common: {minChar:8},
            ui: {
                showVerdictsInsideProgressBar:true,
                showErrors:true,
                errorMessages:{
                      wordLength: /*[[#{error.wordLength}]]*/,
                      wordNotEmail: /*[[#{error.wordNotEmail}]]*/,
                      wordSequences: /*[[#{error.wordSequences}]]*/,
                      wordLowercase: /*[[#{error.wordLowercase}]]*/,
                      wordUppercase: /*[[#{error.wordUppercase}]]*/,
                      wordOneNumber: /*[[#{error.wordOneNumber}]]*/,
                      wordOneSpecialChar: /*[[#{error.wordOneSpecialChar}]]*/'
                    }
                }
        };
     $('#password').pwstrength(options);
});

function savePass(event){
	
    event.preventDefault();
    $(".alert").html("").hide();
    $(".error-list").html("");
    if($("#password").val() != $("#matchPassword").val()){
        $("#globalError").show().html(/*[[#{PasswordMatches.user}]]*/);
        return;
    }
    var formData= $('form').serialize();
    
    $.post(serverContext + "user/updatePassword",formData ,function(data){
    	/* window.location.href = serverContext + "console.html" + "?message="+data.message; */
    	/* $("#successmsg").show().append(data.message); */
    	successMsg(data.message);
    	
    }).fail(function(data) {
        if(data.responseJSON.error.indexOf("InvalidOldPassword") > -1) {
            $("#errormsg").show().append(data.responseJSON.message);
        }
        else if(data.responseJSON.error.indexOf("InternalError") > -1){
            $("#errormsg").show().append(data.responseJSON.message);
        }
        else{
        	var errors = $.parseJSON(data.responseJSON.message);
            $.each( errors, function( index,item ){
                $("#globalError").show().html(item.defaultMessage);
            });
            errors = $.parseJSON(data.responseJSON.error);
            $.each( errors, function( index,item ){
                $("#globalError").show().append(item.defaultMessage+"<br/>");
            });
        }
    });
}


$(document).ready(function () {
    
	$('#updateUserInfoForm').submit(function(event) {
		updateUserInfo(event);
    });
    
});

function updateUserInfo(event){
	
    event.preventDefault();
    $(".alert").html("").hide();
    $(".error-list").html("");
    var formData= $('form').serialize();
    
    $.post(serverContext + "user/updatePersonalInfo",formData ,function(data){
    	/* window.location.href = serverContext + "console.html" + "?message="+data.message; */
    	/* $("#successmsg").show().append(data.message); */
    	successMsg(data.message);
    	
    }).fail(function(data) {
        if(data.responseJSON.error.indexOf("InternalError") > -1){
            /* $("#errormsg").show().append(data.responseJSON.message); */
        	errorMsg(data.responseJSON.message);
        }else{
        	var errors = $.parseJSON(data.responseJSON.message);
            $.each( errors, function( index,item ){
                $("#"+item.field+"Error").show().html(item.defaultMessage);
            });
        }
    });
}



$(document).ready(function () {
    
	$('#groupForm').submit(function(event) {
		saveGroup(event);
    });
    
});




function saveGroup(event){
	
    event.preventDefault();
        
    var formData= $('#groupForm').serialize();
    
    $.post(serverContext + "teacher/group/save",formData ,function(data){
    	/* window.location.href = serverContext + "console.html" + "?message="+data.message; */
    	/* $("#successmsg").show().append(data.message); */
    	successMsg(data.message);
    	
    }).fail(function(data) {
        if(data.responseJSON.error.indexOf("InternalError") > -1){
            /* $("#errormsg").show().append(data.responseJSON.message); */
        	errorMsg(data.responseJSON.message);
        }else if(data.responseJSON.error == "GroupNameAlreadyExist"){
            /* $("#nameError").show().html(data.responseJSON.message); */
        	 errorMsg(data.responseJSON.message);
        }else{
        	var errors = $.parseJSON(data.responseJSON.message);
            $.each( errors, function( index,item ){
                /* $("#"+item.field+"Error").show().html(item.defaultMessage); */
                errorMsg(item.defaultMessage);
            });
        }
    });
}



$(document).ready(function () {
    
	$('#changePasswordForm').submit(function(event) {
    	savePass(event);
    });
    
    $(":password").keyup(function(){
        if($("#password").val() != $("#matchPassword").val()){
            $("#globalError").show().html(/*[[#{PasswordMatches.user}]]*/);
        }else{
            $("#globalError").html("").hide();
        }
    });
    
    options = {
            common: {minChar:8},
            ui: {
                showVerdictsInsideProgressBar:true,
                showErrors:true,
                errorMessages:{
                      wordLength: /*[[#{error.wordLength}]]*/,
                      wordNotEmail: /*[[#{error.wordNotEmail}]]*/,
                      wordSequences: /*[[#{error.wordSequences}]]*/,
                      wordLowercase: /*[[#{error.wordLowercase}]]*/,
                      wordUppercase: /*[[#{error.wordUppercase}]]*/,
                      wordOneNumber: /*[[#{error.wordOneNumber}]]*/,
                      wordOneSpecialChar: /*[[#{error.wordOneSpecialChar}]]*/'
                    }
                }
        };
     $('#password').pwstrength(options);
});


function successMsg(msg){
	
	$.notify(msg, {
		
		type: "success",
		delay: 5000,
		animate: {
			enter: 'animated fadeInRight',
			exit: 'animated fadeOutRight'
		},
		newest_on_top: true
	});
}

function errorMsg(msg){
	
	$.notify(msg, {
		type: "danger",
		delay: 5000,
		animate: {
			enter: 'animated fadeInRight',
			exit: 'animated fadeOutRight'
		},
		newest_on_top: true
	});
	
}

/*]]>*/ 

</script>
  	
</body>
</html>